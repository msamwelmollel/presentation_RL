!function(){var V="_sotmpid",M=63072e3,j="_sotmsid",W=1800,z=!1,U=1,X="",Q="play",Y=!1;(function(v){"use strict";var m=v.navigator,n=v.console,e=function(e,n){return e.bind?e.bind(n):e},h=z&&n?e(n.log,n):function(){},f=z&&n?e(n.info,n):function(){},p=z&&n?e(n.warn,n):function(){},i=z&&n?e(n.error,n):function(){};if(v.hasOwnProperty("tentacles")&&v.tentacles.hasOwnProperty("noCookies")&&v.tentacles.noCookies){h("No cookies mode enabled.");Y=true}var t=function(){return document.body||document.getElementsByTagName("body").item(0)},y=(h("Initializing Tentacles ingestion module"),v.screen.availWidth),w=v.screen.availHeight,k=function(){return v["innerWidth"]||document.documentElement["clientWidth"]||t()["clientWidth"]||document.documentElement["offsetWidth"]||t()["offsetWidth"]},b=function(){return v["innerHeight"]||document.documentElement["clientHeight"]||t()["clientHeight"]||document.documentElement["offsetHeight"]||t()["offsetHeight"]},g,I,P,T,x,s="https://ingestion.smartocto.com",S=function(){var u=[0,10,20,5,15,16,1,11,21,6,7,17,2,12,22,23,8,18,3,13,14,24,9,19,4],f=[1,32898,32906,2147516416,32907,2147483649,2147516545,32777,138,136,2147516425,2147483658,2147516555,139,32905,32771,32770,128,32778,2147483658,2147516545,32896],p=[0,1,30,28,27,4,12,6,23,20,3,10,11,25,7,9,13,15,21,8,18,2,29,24,14],g=function(e,n){return e<<n|e>>>32-n};return function(e){var n,i=[];for(n=0;n<25;n+=1)i[n]=0;if(e.length%16===15)e+="老";else{e+="";while(e.length%16!==15)e+="\0";e+="耀"}for(var t=0;t<e.length;t+=16){for(n=0;n<16;n+=2)i[n/2]^=e.charCodeAt(t+n)+e.charCodeAt(t+n+1)*65536;for(var o=0;o<22;o+=1){var r=[];for(n=0;n<5;n+=1)r[n]=i[n]^i[n+5]^i[n+10]^i[n+15]^i[n+20];var a=[];for(n=0;n<5;n+=1)a[n]=r[(n+4)%5]^g(r[(n+1)%5],1);var s=[];for(n=0;n<25;n+=1)s[u[n]]=g(i[n]^a[n%5],p[n]);for(n=0;n<5;n+=1)for(var d=0;d<25;d+=5)i[d+n]=s[d+n]^~s[d+(n+1)%5]&s[d+(n+2)%5];i[0]^=f[o]}}var l=[];for(n=0;n<8;++n){var c=i[n];l.push(c&255,c>>>8,c>>>16,c>>>24)}return l}}(),o=function(e){return document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+e+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1")||null},C=function(e,n,i,t,o){var r=new Date(t+1e3*i);var a=e+"="+n+"; path=/; expires="+r.toUTCString()+"; max-age="+i+"; secure=true; SameSite=Strict;";if(o)a+="; domain="+o;document.cookie=a},E=function(e){try{document.cookie=e+"=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT; secure=true; SameSite=Strict;"}catch(e){n.error(e)}},r=function(){var t=Math,i=v["crypto"]||v["msCrypto"],o="undefined"!==typeof i&&"undefined"!==typeof i["getRandomValues"],r=o?function(e){var n=new Uint8Array(e);i["getRandomValues"](n);return n}:function(e){var n=new Array(e);for(var i=0;i<e;++i)n[i]=t.floor(t.random()*256);return n},n=function(e){var n=r(e),i="";for(var t=0;t<n.length;++t)i+=String.fromCharCode(n[t]);return i},a=["application/pdf","video/quicktime","video/x-msvideo","audio/x-pn-realaudio-plugin","audio/mpeg3","application/googletalk","application/x-mplayer2","application/x-director","application/x-shockwave-flash","application/x-java-vm","application/x-googlegears","application/x-silverlight"],s=function(){var e,n=m["mimeTypes"];h(m["mimeTypes"]);if(n){e="plugins:";for(var i=0,t=a.length;i<t;++i){var o=a[i];e+=o in n?"1":"0"}}else e="";return e},d=["ShockwaveFlash.ShockwaveFlash.1","AcroPDF.PDF","AgControl.AgControl","QuickTime.QuickTime"],l=function(){var n;if("ActiveXObject"in v){n="activex:";for(var e=0,i=d.length;e<i;++e){var t=d[e];try{var o=new ActiveXObject(t);n+="1";if("getVersions"in o)n+="("+o["getVersions"]()+")";else if("getVariable"in o)n+="("+o["getVariable"]("$version")+")"}catch(e){n+="0"}}}else n="";return n},c=function(){var e=k(),n=b();return[m["userAgent"]||"",m["platform"]||"",m["language"]||"",m["systemLanguage"]||"",m["userLanguage"]||"",y?y.toString(36):"",w?w.toString(36):"",e?e.toString(36):"",n?e.toString(36):"",s(),l()]},u=function(){var e=[(new Date).getTime().toString(36),v.location.href||"",n(32)];if(!o)e.push.apply(e,c());return S(e.join(""))},f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxzy0123456789~_",p=function(){var e=u();var n="";for(var i=0,t=e.length;i<t;++i)n+=f.charAt(e[i]&63);if(!o)n+="!";return n};var g=(new Date).getTime();return function(e){var n=p();return"0:"+(e?g.toString(36)+":"+n:n)}}(),d=function(e,n){var i=false;var t=setTimeout(function(){if(!i){i=true;h("Timeout waiting for event callback; invoking anyway.",this,arguments);e.apply(this,arguments)}},n);return function(){if(!i){i=true;clearTimeout(t);e.apply(this,arguments)}}},A=function(e,n){var i;var t={};switch(e.toLowerCase()){case"pageview":i="/t";t=!n?{}:{ch:n["channel"],bid:n["brandId"],rid:n["relationId"],n:n["pageType"]};break;case"linkclick":case"loyaltyclick":i="/c";t=!n?{}:{htcid:n["headerTestChosenId"],htid:n["headerTestId"],bid:n["brandId"],lh:n["linkHeight"],lp:n["linkPath"],lps:n["linkPosition"],lcp:n["linkSourcePath"],lw:n["linkWidth"],lx1:n["linkX1"],lx2:n["linkX2"],ly1:n["linkY1"],ly2:n["linkY2"],lxp:n["linkXPath"],rid:n["relationId"]};break;case"impressions":i="/i";t=!n?{}:{bid:n["brandId"],impressions:n["impressions"]};break;case"readingtime":i="/r";t=!n?{}:{ar:n["ar"],at:n["at"],bid:n["brandId"],rid:n["relationId"],wc:n["wc"],sp:n["sp"],n:n["pageType"]};break;case"datalayer":i="/d";t=!n?{}:{bid:n["brandId"],rid:n["relationId"],au:n["author"],at:n["articleType"],aa:n["articleAccess"],se:n["section"],le:n["length"],re:n["region"],uri:n["uri"],ti:n["title"],ta:n["tags"],ts:n["timestamp"],vid:n["videoId"],va:n["videoAuthor"],vt:n["videoTitle"],vpd:n["videoPublicationDate"],ha:n["hash"],hv:n["hasVideo"],do:n["documentId"],ch:n["channel"],n:n["pageType"]};break;case"videoplay":i="/v";t=!n?{}:{bid:n["brandId"],vid:n["videoId"],vt:n["title"],rid:n["relationId"],ac:Q,se:n["section"],ta:n["tags"],ch:n["channel"],uri:n["uri"],vd:n["duration"],iu:n["imageUrl"],va:n["authors"],vpd:n["pubDate"]};break}return{endpoint:i,mapping:t}},a=function(){this.queue=[]},H=(a.prototype.enqueue=function(e){var n=this.queue;h("Queueing item for processing; "+n.length+" currently pending.",e);n.push(e);if(1===n.length){h("No pending items; processing immediately.",e);this.processNextItem()}},a.prototype.processNextItem=function(){var e=this.queue[0];switch(typeof e){case"string":this.deliverFirstPendingEvent(e);break;case"function":this.invokeFirstPendingCallback(e);break;default:i("Dropping unknown type of item in beacon queue.",e);this.onFirstPendingItemCompleted()}},a.prototype.deliverFirstPendingEvent=function(e){var n=this;h("Delivering pending event.",e);var i=e.split("&").reduce(function(e,n,i,t){var o=n.split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1]);return e},{});var t=d(function(){n.onFirstPendingItemCompleted()},U*1e3);var o=new XMLHttpRequest;o.onload=t;o.onerror=!z?t:function(e){p("Error delivering event",a);t()};var r=A(i["t"]).endpoint;var a=s+r+"?"+e;o.open("get",a,true);o.send()},a.prototype.invokeFirstPendingCallback=function(e){e();this.onFirstPendingItemCompleted()},a.prototype.onFirstPendingItemCompleted=function(){h("Marking pending item as complete.");var e=this.queue;e.shift();var n=e.length;if(0<n){h("Processing next item; remaining count:",n);this.processNextItem()}else h("All pending items have been delivered.")},new a),l,c;if(Y){if(v.hasOwnProperty("tentacles")&&v.tentacles.hasOwnProperty("partyId"))l=v.tentacles.partyId;else l=undefined;if(v.hasOwnProperty("tentacles")&&v.tentacles.hasOwnProperty("sessionId"))c=v.tentacles.sessionId;else c=undefined;if(!l){h("No window.tentacles.partyId; generating identifier.");g=r(true)}else g=l;if(!c){h("No window.tentacles.sessionId; generating identifier.");I=r(true)}else I=c}else{var l=o(V),c=o(j);if(T=!l){h("No partyId; generating identifier.");g=r(true)}else g=l;if(x=!c){h("No sessionId; generating identifier.");I=r(true)}else I=c}f("Tentacles ingestion party/session identifiers",g,I);var u=0,q=function(){var e=u++;return P+e.toString(16)},F=function(){P=r(false);L["pageViewId"]=P;u=0;f("Starting page view",P)},R,L={partyId:g,sessionId:I,pageViewId:P,isNewPartyId:T,isFirstInSession:x,active:false,signal:function(e,n){if(!P)F();var i;if(e){i=q();if("undefined"===typeof n)f("Signalling event: "+e,i);else f("Signalling event with params: "+e,i,n);var t=document.referrer,o=(new Date).getTime(),r={p:g,s:I,v:P,e:i,c:o,f:x?"t":"f",l:v.location.href,r:t?t:undefined,i:y,j:w,k:v["devicePixelRatio"],w:k(),h:b(),t:e};var a=A(e,n).mapping;Object.assign(r,a);var s="",d={},l=function(e,n){if(s.length>0)s+="&";var i=d[e];if("undefined"===typeof i){i=[];d[e]=i}i.push(n);s+=e+"="+encodeURIComponent(n)};for(var c in r)if(r.hasOwnProperty(c)){var u=r[c];switch(typeof u){case"undefined":break;case"number":l(c,u);break;default:l(c,u)}}T=false;x=false;if(!Y){if(I){h("Setting session cookie.",I);C(j,I,W,o,X)}if(g){h("Setting party cookie.",g);C(V,g,M,o,X)}}else{h("No cookies mode; not setting cookies, we will delete them on page unload.");E(V);E(j)}H.enqueue(s)}else{p("Ignoring event with no type.");i=null}return i},apiToken:v.hasOwnProperty("tentacles")&&v["tentacles"].hasOwnProperty("apiToken")?v["tentacles"]["apiToken"]:null},O,N;if("object"!==typeof v["ingestion"]||!v["ingestion"].hasOwnProperty("partyId")){if(typeof v["define"]==="function"&&v["define"]["amd"])v["ingestion"]=L;else if(typeof v["module"]!=="undefined"&&v["module"]["exports"])v["module"]["exports"]=L;else v["ingestion"]=L;h("Module initialized.",L);if(typeof document["hidden"]!=="undefined"){O="hidden";N="visibilitychange"}else if(typeof document["mozHidden"]!=="undefined"){O="mozHidden";N="mozvisibilitychange"}else if(typeof document["msHidden"]!=="undefined"){O="msHidden";N="msvisibilitychange"}else if(typeof document["webkitHidden"]!=="undefined"){O="webkitHidden";N="webkitvisibilitychange"}else p("Could not detect property for document visibility.");if(!v.document[O]){h("Page already visible; starting page view immediately.");F()}else if(v.document["addEventListener"]&&v.document["removeEventListener"]){h("Page currently hidden; deferring start of page view.");v.document["addEventListener"](N,function e(){if(null===P&&v.document[O]===false){h("Page became visible; starting deferred page view.");F()}if(null!==P)v.document["removeEventListener"](N,e)})}else{p("Page currently hidden, but don't know how to defer start of page view; starting page view immediately.");F()}if("onpageshow"in v&&"onpagehide"in v&&v["addEventListener"]&&v["removeEventListener"]){h("Detected Page Transition Event API; will trigger additional page-views during navigation.");v["addEventListener"]("pagehide",function e(){v["removeEventListener"]("pagehide",e);v["addEventListener"]("pageshow",function(){h("Returning to page that is still loaded; starting a new page-view.");F()})})}else{var D=v["history"];if(D&&typeof(D["navigationMode"]!=="undefined")){f("Changing navigation mode from "+D["navigationMode"]+" to 'compatible'.");D["navigationMode"]="compatible"}}}else p("Ingestion module already initialized; existing module left intact.")})("undefined"!=typeof window?window:this)}("undefined"==typeof t&&(t={}));